{{- $distro := .distro -}}
{{- $board := .board -}}

{{- $architecture := .architecture -}}

architecture: {{ $architecture }}

actions:
{{ if or (eq $board "rock-5a") (eq $board "rock-5b") (eq $board "radxa-e25") }}

  - action: overlay
    description: Install dkms overlays
    source: ../overlays/dkms
    destination: /

  - action: apt
    description: Install {{ $board }} dkms packages
    packages:
      - r8125-dkms
  {{ if ne $board "radxa-e25" }}
      - 8852bu-dkms
      - rtk-btusb-dkms
  {{ end }}

{{ else }}

  - action: run
    description: No operation
    command: set -e

{{ end }}
