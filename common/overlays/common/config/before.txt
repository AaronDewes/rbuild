# ==============================
# Radxa First Boot Configuration
# ==============================
log "Running before.txt as first boot configuration"

# Create the default account
# Commands:
#   add_user <user name> <password>
#   user_append_group <user name> <group>
#
add_user radxa radxa
user_append_group radxa sudo
user_append_group radxa audio
user_append_group radxa video
user_append_group radxa plugdev
user_append_group radxa render

# Resize root partition at filesystem level
#
resize_root

# Disable services
# Command:
#   disable_service <systemd unit name>
#
disable_service ssh
disable_service smbd
disable_service nmbd

# Generate unique hardware fingerprint
#
regenerate_ssh_hostkey

# Configure locale
# Command:
#   update_locale <locale>
#
update_locale en_US.UTF-8

# Enable SSH on headless first boot
# Keyword:
#   if|if_not <condition> <command>
# Condition:
#   headless: When no display connector is connected
# Command:
#   enable_service <systemd unit name>
#
if headless enable_service ssh
